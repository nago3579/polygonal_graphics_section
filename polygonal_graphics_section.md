---


---

<h1 id="how-polygonal-graphics-are-made">How Polygonal Graphics Are Made</h1>
<p>Like atoms, most computer-generated 3D objects are built with polygons, collections of triangles or squares connected together in 3D space to approximate shapes. In this article, we will explore how computers see polygons out of information, and turn that into graphics like you would see in a movie or video game. I’ll be using <a href="https://www.babylonjs.com/">Babylon.js</a>, an in-browser rendering engine that uses WebGL, to visualize some of the concepts discussed.</p>
<h3 id="d-from-2d">3D from 2D</h3>
<p>Computers handle 2D images really well. To take advantage of this property, 3D models are most commonly built from triangles or less commonly from squares arranged as faces of a solid. Shapes like spheres and cylinders can not be broken down into discrete triangles, so we approximate them as polygons with many faces.</p>
<p>These faces are constructed by vertices made up of points. We can visualize these vertices with wireframes, where vertices are highlighted and faces are transparent. For example, here is a <a href="https://playground.babylonjs.com/#T4TNWL">wireframe of a sphere</a>.</p>
<p><img src="https://i.imgur.com/gUnhTu4.png" alt="Sphere Wireframe"></p>
<p>To explore how changing the number of vertices changes the approximation of the solid, try experimenting with the number of <a href="https://playground.babylonjs.com/#VR8AHB">tessellations on this cylinder</a>. Change the value of <code>poly</code> up or down to see how creating more subdivisions in a shape increases quality. The higher the vertext count, the more memory the shape takes up, and resources it needs to be operated on. This is why early movies and video games have models with much less detail then they do today.</p>
<h3 id="textures">Textures</h3>
<p>Once we define the triangles that make up the shape, known as a mesh, we can draw the faces over the triangles. This is known as texturing. To elaborate on this, let’s look at an <a href="https://playground.babylonjs.com/#T40FK#128">example of texturing faces of a cube</a> created by a <a href="https://www.html5gamedevs.com/topic/12392-having-different-textures-for-each-face-on-a-cube/">user</a> on the HTML5GameDevs Forums. The example shows applying different colors to each face of the cube with this code:</p>
<pre class=" language-javascript"><code class="prism  language-javascript">box<span class="token punctuation">.</span>subMeshes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span>  <span class="token class-name">BABYLON<span class="token punctuation">.</span>SubMesh</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> verticesCount<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span>subMeshes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span>  <span class="token class-name">BABYLON<span class="token punctuation">.</span>SubMesh</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> verticesCount<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span>subMeshes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span>  <span class="token class-name">BABYLON<span class="token punctuation">.</span>SubMesh</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> verticesCount<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span>subMeshes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span>  <span class="token class-name">BABYLON<span class="token punctuation">.</span>SubMesh</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> verticesCount<span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span>subMeshes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span>  <span class="token class-name">BABYLON<span class="token punctuation">.</span>SubMesh</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> verticesCount<span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span>subMeshes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span>  <span class="token class-name">BABYLON<span class="token punctuation">.</span>SubMesh</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> verticesCount<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The numbers, including <code>verticesCount</code> are bounds telling the mesh what triangles to apply the texture to. Try changing the first 6 to a 5 and see which face is not colored.</p>
<h3 id="transformations">Transformations</h3>
<p>Since the end result of most 3D graphics need to be displayed on a 2D screen from a fixed viewpoint, 3D models need to be able to be rotated and moved in respect to the viewer. This is done with transformation matrices. In essence, these matrices define how any given point would be rotated. This matrix is then multiplied by the matrix containing the vertices of the shape to define new positions for each point. Due to the ease of using transformation matrices, it is far easier to move and transform all 3D models around the viewer than to move the viewer themselves.</p>
<h3 id="files">Files</h3>
<p>Now that we know how to model a 3D object with math and code, we can look at how the computer stores this information. For our example, we will use the <code>.obj</code> file of the famous <a href="https://en.wikipedia.org/wiki/Utah_teapot">Utah Teapot</a>. You can find the full text dump of the stl file on <a href="https://raw.githubusercontent.com/nago3579/utah_teapot_stl_text/master/teapot.obj">Github</a>.</p>
<p>The first thing you should notice is the first few lines that look like:</p>
<pre><code>v  33.647778 59.807484 4.662212
v  33.322739 59.872997 4.617175
v  34.018166 59.610893 4.713532
v  34.326466 59.610893 -0.000000
</code></pre>
<p>These are definitions of vertices with the following numbers representing the x, y, and z coordinates that point falls on.</p>
<p>Next, there will be texture coordinates ‘vt’:</p>
<pre><code>vt 0.137955 0.706978 -0.167330
vt 0.137891 0.712241 -0.167330
vt 0.137839 0.716650 -0.167330
vt 0.137798 0.719934 -0.167330
</code></pre>
<p>Most of the time, textures are saved as one large file containing the entirety of the texture in a single image. This normally looks like the unfolded version of the mesh. These numbers tell the texture how to wrap around the mesh.</p>
<p>Finally there should be <code>f</code> entries. These are the faces.</p>
<pre><code>f 2/3 1/4 1536/1 1537/2 
f 1/4 3/6 4/5 1536/1 
f 3/6 5/8 6/7 4/5 
f 5/8 7/10 8/9 6/7 
</code></pre>
<p>This version of the Utah Teapot uses squares instead of the triangles we saw above. The four sets of numbers here define the square faces of the model. The number before the slash is the vertex number, meaning the corner of the square, and the number after the slash is the texture wrapping vertex.</p>
<h3 id="wrap-up">Wrap Up</h3>
<p>Polygonal objects are the backbone of 3D graphics, and are worth understanding to better optimize your graphical projects or find ways to increase detail.</p>

